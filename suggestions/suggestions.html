<!DOCTYPE html>
<html lang="en-US"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Assignment Details | Principles of Reactive Programming</title>
<link rel="stylesheet" href="suggestions_files/spark.css">
<link rel="stylesheet" href="suggestions_files/course.css">
<link rel="icon" href="https://spark-public.s3.amazonaws.com/reactive/static/images/favicon.ico">
<style type="text/css"> .coursera-reporter-link { display:inline-block;} </style><script src="suggestions_files/MathJax.js" type="text/javascript"></script><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuTitle {background-color: #CCCCCC; margin: -5px 0 0 0; text-align: center; font-style: italic; font-size: 80%; color: #444444; padding: 2px 0; overflow: hidden}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style></head>

<body><div style="display: none;" id="MathJax_Message"></div>
    <a href="#course-page-content" class="hidden">Skip Navigation</a>
    <div class="hidden">
        This page features MathJax technology to render mathematical formulae.
        If you are using a screen reader, please visit <a href="http://www.dessci.com/en/products/mathplayer/">MathPlayer</a> to download the plugin for your browser. Please note that this is an Internet Explorer-only plugin at this time.
    </div>

    <h1 class="hidden">Principles of Reactive Programming</h1>

    <script src="suggestions_files/204.js" async="" type="text/javascript"></script><script src="suggestions_files/ga.js" async="" type="text/javascript"></script><script>window.onerror = function(message, url, lineNum) {

  // First check the URL and line number of the error
  url = url || window.location.href;
  // 99% of the time, errors without line numbers arent due to our code,
  // they are due to third party plugins and browser extensions
  if (lineNum === undefined || lineNum == null) return;
  
  // Now figure out the actual error message
  // If it's an event, as triggered in several browsers
  if (message.target && message.type) {
    message = message.type;
  }
  if (!message.indexOf) {
    message = 'Non-string, non-event error: ' + (typeof message);
  }
  
  var errorDescrip = {
    message: message,
    script: url,
    line: lineNum,
    url: document.URL
  }
  
  var err = {
    key: 'page.error.javascript', 
    value: errorDescrip
  }
  
  window._204 = window._204 || [];
  window._204.push(err);
  
  window._gaq = window._gaq || [];
  window._gaq.push(err);
}</script>

<div class="course-topbar container-fluid" role="banner">

    <div class="row-fluid">

        <div class="span3">
          <a href="https://www.coursera.org/" class="course-topbar-logo" data-if-linkable="add-referrer"></a>
        </div>

        <div class="course-topbar-nav-container span9" style="float:right;">
            <h2 class="hidden">Top Navigation Bar</h2>

            <ul class="course-topbar-nav-list">
                <li class="course-topbar-nav-list-item">
                  <a href="https://www.coursera.org/courses" data-if-linkable="add-referrer">Courses</a>
                </li>

                
                <li class="course-topbar-nav-list-item" tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" aria-owns="course-topbar-my" data-popup="#course-topbar-my" data-popup-bind-open="mouseenter" data-popup-close="" style="cursor:pointer;" data-popup-direction="se">
                                        <a data-user-id="4658484">
                        Stefano Sgorlon                        <i class="icon-caret-down"></i>
                    </a>
                </li>

                            </ul>
        </div>
    </div>

    <div id="course-topbar-aboutus" class="course-topbar-sublist">
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/about/jobs" target="_new" data-if-linkable="add-referrer">Jobs</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/about/team" target="_new" data-if-linkable="add-referrer">Team</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/about/contact" target="_new" data-if-linkable="add-referrer">Contact Us</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/about/" target="_new" data-if-linkable="add-referrer">About Us</a>
    </div>

    <div id="course-topbar-my" class="course-topbar-sublist">
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/" target="_new">My Courses</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/account/profile" target="_new">Profile</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/account/records" target="_new">Course Records</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/account/settings" target="_new">Settings</a>
                <a class="course-topbar-sublist-item" href="https://class.coursera.org/reactive-001/class/preferences">Course Preferences</a>
        <a class="course-topbar-sublist-item" href="https://class.coursera.org/reactive-001/auth/logout">Sign Out</a>
    </div>

</div>








<div class="course-topbanner-wrapper">
  <div class="course-topbanner">
    <div class="course-topbanner-university-logo">
      <a href="https://www.coursera.org/epfl" class="coursera-university-color" target="_blank" data-if-linkable="add-referrer" title="https://www.coursera.org/epfl">
        <img src="suggestions_files/university_logo.png" alt="epfl">
      </a>
    </div>

    
    <h1 class="course-topbanner-header">
      <a class="course-topbanner-name coursera-university-color" href="https://class.coursera.org/reactive-001/class/index" data-if-linkable="modal-lock">
        Principles of Reactive Programming      </a>
      <br>
      <span class="course-topbanner-instructor" style="">
        by Erik Meijer, Martin Odersky, Roland Kuhn      </span>
    </h1>

  </div>
</div>

        <div class="container-fluid" style="position:relative;">
        <div class="row-fluid">
            <div id="course-page-sidebar" role="navigation">
                <div class="course-navbar-container">
	<a href="https://class.coursera.org/reactive-001/class/index" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_index">
		<img src="suggestions_files/logo.jpeg" style="width: 205px;height: 116px;margin: -15px 0px 8px 1px; box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.05);" alt="Course Home Page">
	</a>

	<div data-coursera-course-search-nav-widget="" class="input-append course-search-nav-box">
		<form class="form-inline minimized-search" method="get" action="https://class.coursera.org/reactive-001/class/search" data-js-search-form="">
			<label for="course-search-nav-input" class="accessible-text-for-reader">Search this course</label>
			<input id="course-search-nav-input" name="q" data-js-search-input="" type="text">&nbsp;
			<button class="btn icon-search" type="submit" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="search">
				<span class="accessible-text-for-reader">Search</span>
			</button>
		</form>
	</div>

<h2 class="hidden">Side Navigation Bar</h2>
<ul class="course-navbar-list">
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/class/index" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Home">
				
				Home							</a>
						</li>
	
		
	<li class="course-navbar-item">
								</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/lecture/index" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Video_Lectures">
				
				Video Lectures							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=LearningResources" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Learning_Resources">
				
				Learning Resources							</a>
						</li>
	
		
	<li class="course-navbar-item active">
								<a href="https://class.coursera.org/reactive-001/assignment/index" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Assignments">
				
				Assignments							<span class="course-navbar-selected-marker">(selected)</span></a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=Assignment_2_FAQ" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Assignment_2_FAQ_(Simulations)">
				
				Assignment 2 FAQ (Simulations)							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=assignment_3_faq" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Assignment_3_FAQ_(NodeScala)">
				
				Assignment 3 FAQ (NodeScala)							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=Week_4_FAQ" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Week_4_FAQ_(Lectures_+_Assignment)">
				
				Week 4 FAQ (Lectures + Assignment)							</a>
						</li>
	
		
	<li class="course-navbar-item">
								</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/forum/index" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Discussion_Forums">
				
				Discussion Forums							</a>
						</li>
	
		
	<li class="course-navbar-item">
								</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=ToolsSetup" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Tools_Setup">
				
				Tools Setup							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=SbtTutorial" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Sbt_Tutorial">
				
				Sbt Tutorial							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=EclipseTutorial" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Eclipse_Tutorial">
				
				Eclipse Tutorial							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=ScalaTutorial" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Scala_Tutorial">
				
				Scala Tutorial							</a>
						</li>
	
		
	<li class="course-navbar-item">
								</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=ScalaStyleGuide" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Scala_Style_Guide">
				
				Scala Style Guide							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=CheatSheet" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Scala_Cheat_Sheet">
				
				Scala Cheat Sheet							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=ReactiveCheatSheet" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Reactive_Cheat_Sheet">
				
				Reactive Cheat Sheet							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=GradingPolicy" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Grading_Policy">
				
				Grading Policy							</a>
						</li>
	
	
		
		<li class="course-navbar-item">
		<a href="http://www.meetup.com/Coursera/" target="_blank" class="coursera-university-color">
			Join a Meetup
			<span class="icon-share"></span>
		</a>
	</li>
	
    </ul>

<ul style="list-style-type:none;margin-left: 10px;">
  <li><a href="http://help.coursera.org/" class="coursera-university-color" target="_blank" title="Open help articles in new window"><i class="icon-question-sign"></i> Help Articles</a></li>
</ul>

<ul style="list-style-type:none;margin-left: 10px;">
		<li><a href="https://class.coursera.org/reactive-001/forum/list?forum_id=10000" class="coursera-university-color"><i class="icon-comments"></i> Course Materials Errors</a></li>
	<li><a href="https://class.coursera.org/reactive-001/forum/list?forum_id=10001" class="coursera-university-color"><i class="icon-comments"></i> Technical Issues</a></li>

</ul>

</div>
            </div>
            <div id="course-page-content" role="main">
                                <h2 class="course-page-header">
  <span>Wikipedia Suggestions: Instructions</span>

  <a class="coursera-reporter-link" title="Click here if you're experiencing technical problems or found errors in the course materials." target="_blank" href="https://class.coursera.org/reactive-001/help/programming?url=https%3A%2F%2Fclass.coursera.org%2Freactive-001%2Fassignment%2Fview%3Fassignment_id%3D13">
     Help
  </a>
</h2>

<br>
<p>When you're ready to submit your solution, go to the <a href="https://class.coursera.org/reactive-001/assignment/list">assignments list</a>.
</p>

<br>
<p>
</p><p>Attention: You are allowed to submit <b>an unlimited number of times</b>!
 for grade purposes. Once you have submitted your solution, you should 
see your grade and a feedback about your code on the Coursera website 
within 20 minutes. If you want to improve your grade, just submit an 
improved solution. </p>

<p>To get started, <a href="https://d396qusza40orc.cloudfront.net/reactive%2Fassignments%2Fsuggestions.zip">download the suggestions.zip</a> handout archive file and extract it somewhere on your machine.</p>

<p>In this exercise you will develop a reactive graphical user interface
 for the Wikipedia Suggestions application. This application will allow 
the user to enter a search term and in real time render a list of 
possible completions of that search term from Wikipedia. After that, a 
user will be able to select one of the suggested terms and click <code>Get</code>, which will render the desired wikipedia page.</p>

<p>Note: all the functionality you will be asked to implement in this assignment can be done using only the methods in the <a href="http://rxscala.github.io/scaladoc/index.html#rx.lang.scala.Observable">Scala wrapper</a> of the Rx framework.</p>

<h2 id="short_introduction">Short introduction</h2>

<p>In this exercise you will use ScalaSwing to build a GUI for looking 
at Wikipedia pages. At some point, the Swing GUI-related code you write 
needs to be tested, and to do this, your program logic needs to be 
abstracted away from the Swing logic. If you would really like to 
understand the details of how the Swing code is abstracted, you can take
 a look at the appendix sections at the end of this document. However, 
you should be able to solve this exercise completely without consulting 
them.</p>

<h2 id="observable_extensions">Observable extensions</h2>

<p>Most GUI toolkits are callback-based. They provide a plethora of 
different UI components like buttons or text fields, which raise events 
when something happens to them. If you click a button, a <code>ButtonClicked</code> event is raised and if you type into a text field, a <code>ValueChanged</code>
 event is raised. To listen to these events, the programmer must install
 callbacks to corresponding components. This approach of using callbacks
 and mutable state for designing large scale applications can quickly 
lead to what is known as <em>the callback hell</em>, where a programmer can no longer make sense of the code he wrote.</p>

<p>Instead of using callbacks, we would like to handle event streams. 
Event streams are first-class values that are handled in a more 
declarative fashion than callbacks and are more encapsulated. Event 
streams can be represented using Rx <code>Observable</code>s. In this part of the exercise you will implement several <code>Observable</code>s
 that emit values whenever a Swing component event is raised. This is a 
common pattern when bridging between callback-based and reactive 
stream-based systems – remember it well!</p>

<p>Your task is to implement the following methods in <code>SwingApi.scala</code> by using the <code>Observable.apply(f: Observer =&gt; Subscription)</code> factory method. You will find these methods in the implicit classes for the <code>TextField</code>s and <code>Button</code>s:</p>

<pre><code>def textValues: Observable[String] = ???

def clicks: Observable[Button] = ???</code></pre>

<p>Note: the <code>clicks</code> method should return an observable 
containing the reference to the particular button that was clicked 
(although in this assignment there will only be one single button in the
 GUI).</p>

<p>Scala Swing components can be <code>subscribe</code>d to by creating <code>Reaction</code> objects. These <code>Reaction</code> objects in essence wrap <code>PartialFunction</code>s that handle <a href="http://www.scala-lang.org/api/current/index.html#scala.swing.event.package">Scala Swing events</a> that correspond to the component the <code>Reaction</code>
 is used for. For the purpose of this exercise, you can ignore all 
events other than button presses and changes to the textfield.</p>

<p>The Wikipedia API can give a list of possible completions for a given
 search term. As we will see later, it takes HTTP requests and returns 
responses wrapped in <code>Future</code> objects. Your next task is to implement the general method <code>apply</code> in <code>ObservableEx.scala</code> that converts any <code>Future</code> into an <code>Observable</code>:</p>

<pre><code>def apply[T](f: Future[T])(implicit execContext: ExecutionContext): Observable[T] = ???</code></pre>

<p>Note: use the <a href="http://rxscala.github.io/scaladoc/index.html#rx.lang.scala.subjects.ReplaySubject"><code>ReplaySubject</code></a> to do this.</p>

<p>Be sure to understand the <code>Observable</code> <a href="https://github.com/Netflix/RxJava/wiki/Observable#onnext-oncompleted-and-onerror">contract</a> before you begin.</p>

<h2 id="wikipedia_suggestion_utilities">Wikipedia suggestion utilities</h2>

<p>In the last part of the exercise you implemented <code>Observable</code>s over different input events. In this part you will implement some utility functions over <code>Observable</code>s that will help you complete the GUI functionality in the final part. Creating <code>Observable</code>s manually the way we did it in the last part is generally discouraged. Instead, you should use combinators on <code>Observable</code>s wherever possible to compose them into more complex ones.</p>

<p>The Wikipedia API is factored out in the <code>WikipediaApi</code> trait. It contains two abstract methods:</p>

<pre><code>def wikipediaSuggestion(term: String): Future[List[String]]

def wikipediaPage(term: String): Future[String]</code></pre>

<p>These methods return futures with a list of possible completions for a
 search term and the corresponding Wikipedia page, respectively. 
However, search terms sent in an HTTP request cannot contain spaces! 
Instead, all spaces <code> </code> in a search term should be replaced with an underscore <code>_</code>. Your task is to implement a method <code>sanitized</code> in <code>WikipediaApi.scala</code>
 that, given a stream of search terms returns a new stream of search 
terms such that all the search terms containing spaces are properly 
replaced. You will find the <code>sanitized</code> method in the <code>StringObservableOps</code> implicit class:</p>

<pre><code>def sanitized: Observable[String] = ???</code></pre>

<p>See description of <code>Observable</code> <a href="http://rxscala.github.io/scaladoc/index.html#rx.lang.scala.Observable">combinator methods</a> for ideas on how to achieve this.</p>

<p><code>Observable</code>s might be completed with errors. When composing multiple <code>Observable</code>s, errors from one of them can easily leak into the resulting <code>Observable</code> and complete it by calling <code>onError</code>. To prevent this from happening, any exceptions in the <code>Observable</code> should be wrapped into <code>Failure</code> objects that can be dealt with as if they were ordinary values. Your next task is to implement the method <code>recovered</code> which converts any <code>Observable[T]</code> into an <code>Observable[Try[T]]</code> (hint: consider using the <code>materialize</code> method):</p>

<pre><code>def recovered: Observable[Try[T]] = ???</code></pre>

<p>Next, implement a combinator <code>timedOut</code> that given an observable <code>obs</code> and takes a number of seconds <code>totalSec</code>, and returns a new observable that contains all the events from <code>obs</code> that happened before <code>totalSec</code> seconds elapse. If the <code>obs</code>
 combinator is completed or failed before the timeout, the resulting 
observable should also be completed or failed, respectively. If the <code>obs</code> combinator does not complete before the timeout, the resulting observable should be completed after the timeout.</p>

<pre><code>def timedOut(totalSec: Long): Observable[T] = ???</code></pre>

<p>Finally, sometimes observables are created from more than just one 
other observable. In our case, the list of suggestions depends on both 
the search field and the suggestions for each search term.</p>

<p>Your final task in this part is to implement a method <code>concatRecovered</code> that, given a request stream <code>obs</code>
 and a method to map elements of the request stream (i.e. single 
requests) into response streams, returns a single response stream that 
contains all the responses, both successful and failed, wrapped into a <code>Try</code> object:</p>

<pre><code>def concatRecovered[S](f: T =&gt; Observable[S]): Observable[Try[S]] = ???</code></pre>

<h2 id="putting_it_all_together">Putting it all together</h2>

<p>We now have all the ingredients to complete our Wikipedia Suggestions application! Open <code>WikipediaSuggest.scala</code>
 – you will see the body of the main Scala Swing based application. The 
pieces that concern the static part of the UI are already implemented 
for you – your task is to add some reactive behaviour to this 
application.</p>

<p>The UI currently contains a text field called <code>searchTermField</code>. Your first task is to construct an observable of text field entries called <code>searchTerms</code>:</p>

<pre><code>val searchTerms: Observable[String] = ???</code></pre>

<p>Next, use the <code>searchTerms</code> observable to create an 
observable of lists of suggestions in which each list of suggestion 
corresponds to one search term. If any of the suggestion lists requests 
fail (make sure you don’t wait forever), we would like to have the 
throwable to print the error message, so we wrap the result into a <code>Try</code>. Use the methods defined earlier in the <code>WikipediaApi</code>:</p>

<pre><code>val suggestions: Observable[Try[List[String]]] = ???</code></pre>

<p>The <code>suggestions</code> observable should now be updated while 
you type. Problem is – there is no way to see these changes yet in the 
UI! To display them, we need to update the contents of a component 
called <code>suggestionList</code> every time the observable produces a value. If the <code>suggestions</code> value is not successful, we must print the error message into the <code>status</code> label. Use the <code>subscribe</code> method on <code>suggestions</code> to do this:</p>

<pre><code>val suggestionSubscription: Subscription = ???</code></pre>

<p>Note: all the updates for all the Swing components may only take 
place from a special thread called the event dispatch thread. To ensure 
that the subscription reaction takes place on the event dispatch thread,
 use the <code>observeOn</code> combinator. See the <a href="http://rxscala.github.io/scaladoc/index.html#rx.lang.scala.Observable">ScalaDoc</a> for more information.</p>

<p>Our application would be pretty boring if it were only able to give 
search term suggestions. We would like to pick one of the search term in
 the list of suggestions and press <code>Get</code> to obtain the contents of the corresponding Wikipedia page and display it in the panel on the right side of the UI.</p>

<p>Your next task will be to obtain an observable <code>selections</code>
 of button clicks that contains the search terms selected in the 
suggestion list at the time the button was clicked. If the suggestion 
list had no items selected, then the click should not be part of <code>selections</code>.</p>

<pre><code>val selections: Observable[String] = ???</code></pre>

<p>Next, use the <code>selections</code> observable to obtain an 
observable of the Wikipedia pages corresponding to the respective search
 term (use the previously defined methods from the <code>WikipediaApi</code>):</p>

<pre><code>val pages: Observable[Try[String]] = ???</code></pre>

<p>Again, requests above may fail, so we want to wrap them into <code>Try</code>.</p>

<p>Finally, the observable <code>pages</code> is of little worth unless its values are rendered somewhere. Subscribe to the <code>pages</code> observable to update the <code>editorpane</code> with the contents of the response.</p>

<p>The final application should resemble the following screenshot. Run your application (type <code>run</code>
 in SBT) and type in “Erik Meijer”, then select the first option from 
the list and click “Get”. Below you see the corresponding Wikipedia 
page. It tells us that Erik was previously a 6ft high professional 
footballer, so you better not mess with him!</p>

<p><img alt="Application screenshot" src="suggestions_files/reactiveimagesapplication.png"></p>

<h2 id="appendix_a_extractors_custom_pattern_matching_and_the_cake_pattern">Appendix A: Extractors, custom pattern matching and the cake pattern</h2>

<p>Before we get to Rx and our GUI application, we first need to visit 
some prerequisites. In Scala, pattern matching can be customized to do 
almost anything you like using a feature called <em>extractors</em>. Here is an example of how you can match prime numbers:</p>

<pre><code>object Prime {
  def unapply(x: Int): Option[Int] = if ((2 until x).forall(x % _ != 0)) Some(x) else None
}

1 match {
  case Prime(x) =&gt; println("We like prime numbers!")
}</code></pre>

<p>The crucial method for custom extractors is <code>unapply</code>. This method takes an object of type <code>T</code> and decides if an object can be matched or not. If its argument <code>x</code> can be matched into some value, it returns a <code>Some[T]</code>. If this pattern matching case should fail, it returns <code>None</code>. As long as there is a singleton object or a value named <code>Prime</code> in scope, you can use the pattern matching case <code>case Prime(x) =&gt;</code> to call <code>Prime</code>’s <code>unapply</code> method.</p>

<p>A careful reader may notice that the <code>Prime</code> extractor 
defined above is particularly inefficient. A more efficient 
implementation would check only the divisors smaller than the square 
root of <code>x</code>. This means that there might be multiple 
implementations of that extractor! Can we somehow write our code without
 knowing how exactly <code>Prime</code> is implemented, and just mix in the correct implementation later?</p>

<p>The good news, the <code>unapply</code> method can even belong to an abstract value in scope! So, let’s make the <code>Prime</code> extractor abstract! How do we do that? One way to do this is to introduce a trait <code>Mathematics</code> and have an abstract value <code>Prime</code> there, with an interface <code>PrimeExtractor</code> that has a method <code>unapply</code>:</p>

<pre><code>trait Mathematics {
  type Number

  trait PrimeExtractor {
    def unapply(x: Number): Option[Number]
  }

  val Prime: PrimeExtractor
}</code></pre>

<p>This trait <code>Mathematics</code> also abstracts over what <code>Number</code>s are. They might be represented as ordinary integers, longs or even infinite length big integers. With the <code>Mathematics</code> API, if you have any such a <code>Number</code>, you can figure out if it’s prime, even though you don’t know its exact representation.</p>

<p>A concrete <code>Mathematics</code> implementation is then as follows:</p>

<pre><code>trait FastIntegerMath extends Mathematics {
  type Number = Int
  
  object Prime extends PrimeExtractor {
    def unapply(x: Int): Option[Int] = {
      if ((2 to math.sqrt(x).toInt).forall(x % _ != 0)) Some(x) else None
    }
  }
}

object MyPrimeChecker extends FastIntegerMath {
  def main(args: Array[String]): Unit = args(0).toInt match {
    case Prime(x) =&gt; println(s"the number $x is indeed prime.")
    case _ =&gt; println("not prime")
  }
}</code></pre>

<p>This pattern where the important parts of some API are abstracted away into members of a trait is called a <em>cake pattern</em>,
 because it allows you to pick your favourite implementation of an API 
just like you would pick flavours of different layers of a cake when 
baking it.</p>

<h2 id="appendix_b_scalaswing">Appendix B: ScalaSwing</h2>

<p>ScalaSwing is a Scala-based wrapper around the Java Swing API that 
allows you to write GUI applications in a concise, more declarative 
style. All the details of this framework are a bit too much for this 
exercise, and if you have no prior experience with GUI applications, 
this might be a bit overwhelming for you.</p>

<p>So, guess what? We will use the <em>cake pattern</em> we saw before 
to abstract over important parts of the Swing API. In this way, you will
 be spared from many details of the ScalaSwing framework and we will be 
able to use the same API later to make testing easier.</p>

<p>The first concept present in the ScalaSwing framework are <code>Event</code>s. There are many different kinds of events, but let’s focus on only 2 for now. In the file <code>SwingApi.scala</code> you will find the following events:</p>

<pre><code>type ValueChanged &lt;: Event

val ValueChanged: {
  def unapply(x: Event): Option[TextField]
}

type ButtonClicked &lt;: Event

val ButtonClicked: {
  def unapply(x: Event): Option[Button]
}</code></pre>

<p><code>ValueChanged</code> denotes that a value of a text field has changed, and <code>ButtonClicked</code> denotes that somebody pressed a button.</p>

<p>The next important concept are <code>Reaction</code>s. These are just callbacks that you add to components and that can handle events. A <code>Reaction</code> is just a type alias for a partial function over events:</p>

<pre><code>type Reaction = PartialFunction[Event, Unit]</code></pre>

<p>Now, every Swing <em>component</em> (e.g. a button, text field or a combo box) can be subscribed to with reactions – it has methods <code>subscribe</code> and <code>unsubscribe</code> for this purpose. The type <code>TextField</code> also has an additional method <code>text</code> that returns the current text entered into the text field:</p>

<pre><code>type TextField &lt;: {
  def text: String
  def subscribe(r: Reaction): Unit
  def unsubscribe(r: Reaction): Unit
}

type Button &lt;: {
  def subscribe(r: Reaction): Unit
  def unsubscribe(r: Reaction): Unit
}</code></pre>

<p>The components <code>TextField</code> and <code>Button</code> actually have many more methods, but these are the ones you need to care about. And you can already do much with this:</p>

<pre><code>def printOutTextFieldChanges(field: TextField) = field subscribe {
  case ValueChanged(tf) =&gt; println(tf.text)
}</code></pre>

<p>If you want to know more about how <code>SwingApi</code> is implemented, find the trait <code>ConcreteSwingApi</code> in <code>WikipediaSuggestions.scala</code> and study it. However, this is pretty much everything you need to know about ScalaSwing for this assignment.</p>
<p></p>

            </div>
        </div>
    </div>
        
    
    <script src="suggestions_files/spark.js"></script>

<script>window.onerror = function(message, url, lineNum) {

  // First check the URL and line number of the error
  url = url || window.location.href;
  // 99% of the time, errors without line numbers arent due to our code,
  // they are due to third party plugins and browser extensions
  if (lineNum === undefined || lineNum == null) return;
  
  // Now figure out the actual error message
  // If it's an event, as triggered in several browsers
  if (message.target && message.type) {
    message = message.type;
  }
  if (!message.indexOf) {
    message = 'Non-string, non-event error: ' + (typeof message);
  }
  
  var errorDescrip = {
    message: message,
    script: url,
    line: lineNum,
    url: document.URL
  }
  
  var err = {
    key: 'page.error.javascript', 
    value: errorDescrip
  }
  
  window._204 = window._204 || [];
  window._204.push(err);
  
  window._gaq = window._gaq || [];
  window._gaq.push(err);
}</script>
<script type="text/javascript">
    // SET UP THE MULTITRACKER
        window.logger = window.Log({level:"error"});
        var parts = location.host.split(".");
    while(parts.length > 2) { parts.shift(); }

    window.multitracker = window.MultiTracker({logger:window.logger});
    window.multitracker.register('204', window._204 = window._204 || []);
    window.multitracker.register('ga', window._gaq = window._gaq || [], 'google');

    // SET UP GA and 204
    window._gaq.push(['_setAccount', 'UA-28377374-1']);
    window._gaq.push(['_setDomainName', 'coursera.org']);
    window._gaq.push(['_setAllowLinker', true]);  
    window._gaq.push(['_trackPageview']);
    
    // configure 204 with the following settings
    window._204.push(["client", "spark"]);
    window._204.push(["user", 4658484]);
    window._204.push(["domain", "." + parts.join(".")]);

    // set off the first event
    window._204.push({key:"pageview", val:{}});

    // override our multitracker queues with the ga queue when it is ready
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    
      ga.onload = ga.onreadystatechange = function() {
          ga.onreadystatechange = ga.onload = null;
          window.multitracker.get('ga').queue = window._gaq;
      };
    })();

    // override our multitracker queues with the 204 queue when it is ready
    (function() {
      var a = document.createElement('script'); a.type = 'text/javascript'; a.async = true;
      a.src = 'https://eventing.coursera.org/204.min.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(a, s);
      a.onload = a.onreadystatechange = function() {
          a.onreadystatechange = a.onload = null;
          window.multitracker.get('204').queue = window._204;
      };
    })();
</script>

<script>
  // Set up shared AB testing object
  (function() {
    window.ab = {};

    // we want to share the 204 session cookie with the AB session cookie...
    var sessionId = AB.makeSession("__204u", {expires:365, domain:"." + location.host});

    window.ab.user = window.AB(4658484, "user", {debug:true, tracker:window.multitracker, logger:window.logger});
    window.ab.session = window.AB(sessionId, "session", {debug:true, tracker:window.multitracker, logger:window.logger});

    if(window.CourseraABExperiments.user) {
        window.ab.user.addExperiments(window.CourseraABExperiments.user);
        window.ab.user.runExperimentsOn("body");
    }

    if(window.CourseraABExperiments.session) {
        window.ab.session.addExperiments(window.CourseraABExperiments.session);
        window.ab.session.runExperimentsOn("body");
    }
  })();
</script>


    <script>
      // Set up help widget
      (function() {
        $("[data-helpwidget]").each(function() {
            window.HelpWidget(this, {tracker: window.multitracker});
        });
       })();

        $("[data-readme]").each(function() {
            window.ReadMe(this);
        });
    </script>

    <script src="suggestions_files/modal_focus.js" type="text/javascript"></script>
    <script src="suggestions_files/get_query_parameters.js" type="text/javascript"></script>
    <script src="suggestions_files/signature_track.js" type="text/javascript"></script>
    <script src="suggestions_files/signatureTrackLastChanceModal.js" type="text/javascript"></script>
    <script src="suggestions_files/signatureTrackLastChanceModal2.js" type="text/javascript"></script>
    <script src="suggestions_files/item_list.js" type="text/javascript"></script>
    <script src="suggestions_files/navbar.js" type="text/javascript"></script>

    
    <script>
     // Set up help widget
      (function() {
        $("[data-helpwidget]").each(function() {
            window.HelpWidget(this, {tracker: window.multitracker});
        });
       })();
    </script>

        <script>
    (function() {
        $("<style type='text/css'> .coursera-reporter-link { display:inline-block;} </style>").appendTo("head");
    })();
    </script>
    
    <script type="text/x-mathjax-config;executed=true">
MathJax.Hub.Config({
  config: ["MMLorHTML.js"],
  
  styleSheets: [],
  styles: {},

  jax: ["input/TeX"],
  
  extensions: ["tex2jax.js"],

  preJax: null,
  postJax: null,

  preRemoveClass: "MathJax_Preview",

  showProcessingMessages: true,

  messageStyle: "none",
  
  displayAlign: "center",
  displayIndent: "0em",
  
  delayStartupUntil: "none",

  skipStartupTypeset: false,
  
  elements: [],
  
  tex2jax: {
	    inlineMath: [
	                 ['$$','$$'],      // uncomment this for standard TeX math delimiters
	                 ['\\(','\\)']
	                 ],

	                 displayMath: [
	                 ['\\[','\\]']
	                 ],

    skipTags: ["script","noscript","style","textarea","pre","code"],
    ignoreClass: "tex2jax_ignore",
    processClass: "tex2jax_process",
    processEscapes: false,
    processEnvironments: true,
    preview: "TeX"
    
  },
  
  mml2jax: {
    preview: "alttext"
    
  },
  
  jsMath2jax: {
    preview: "TeX"
    
  },

  TeX: {
    TagSide: "right",
    TagIndent: ".8em",
    MultLineWidth: "85%",
    Macros: {},

    extensions: ["AMSmath.js", "AMSsymbols.js"]
    
  },

  //============================================================================
  //
  //  These parameters control the MathML inupt jax.
  //
  MathML: {
    //
    //  This specifies whether to use TeX spacing or MathML spacing when the
    //  HTML-CSS output jax is used.
    //
    useMathMLspacing: false
  },
  
  //============================================================================
  //
  //  These parameters control the HTML-CSS output jax.
  //
  "HTML-CSS": {
    
    scale: 100,
    
    availableFonts: ["STIX","TeX"],
    
    preferredFont: "TeX",
    
    webFont: "TeX",
    
    imageFont: "TeX",
    
    undefinedFamily: "STIXGeneral,'Arial Unicode MS',serif",
      
    showMathMenu: true,

    styles: {},
    
    tooltip: {
      delayPost: 600,          // milliseconds delay before tooltip is posted after mouseover
      delayClear: 600,         // milliseconds delay before tooltip is cleared after mouseout
      offsetX: 10, offsetY: 5  // pixels to offset tooltip from mouse position
    }
  },
  
  //============================================================================
  //
  //  These parameters control the NativeMML output jax.
  //
  NativeMML: {

    scale: 100,

    showMathMenu: true,
    showMathMenuMSIE: true,

    styles: {}
  },
  
  MathMenu: {
    delay: 400,
    
    helpURL: "http://www.mathjax.org/help/user/",

    showRenderer: true,
    showFontMenu: false,
    showContext:  false,

    windowSettings: {
      status: "no", toolbar: "no", locationbar: "no", menubar: "no",
      directories: "no", personalbar: "no", resizable: "yes", scrollbars: "yes",
      width: 100, height: 50
    },
    
    styles: {}
    
  },

  MMLorHTML: {
    prefer: {
      MSIE:    "MML",
      Firefox: "MML",
      Opera:   "HTML",
      other:   "HTML"
    }
  }
});
</script>
<script type="text/javascript">
(function () {

  function loadMathJax() {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://duqnjvq4jwr55.cloudfront.net/2.1/MathJax.js";
    document.getElementsByTagName("head")[0].appendChild(script);
  }

  window.loadOrRefreshMathJax = function(domId) {
    if (window.MathJax) {
      if (domId) {
        MathJax.Hub.Queue(["Typeset", MathJax.Hub, domId]);
      } else {
        MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
      }
    } else {
      loadMathJax();
    }
  }
})();
</script>
    <script type="text/javascript">
        var site_base_url = "https:\/\/www.coursera.org\/";
        var site_static_asset_url = "https:\/\/dt5zaw6a98blc.cloudfront.net\/site-static\/";
        var spark_class_short_name = "reactive";
        var spark_class_id = 971465;
        var spark_class_url = "\/reactive-001";
        var spark_signature_url = "https:\/\/class.coursera.org\/reactive-001\/signature\/";

        var course_strings_name = "Principles of Reactive Programming";
        var student_full_name = "Stefano Sgorlon";
    </script>

    
<script type="text/javascript">$(function() { loadOrRefreshMathJax();})</script>




</body></html>