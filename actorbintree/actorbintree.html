<!DOCTYPE html>
<html lang="en-US"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Assignment Details | Principles of Reactive Programming</title>
<link rel="stylesheet" href="actorbintree_files/spark.css">
<link rel="stylesheet" href="actorbintree_files/course.css">
<link rel="icon" href="https://spark-public.s3.amazonaws.com/reactive/static/images/favicon.ico">
<style type="text/css"> .coursera-reporter-link { display:inline-block;} </style><script src="actorbintree_files/MathJax.js" type="text/javascript"></script><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuTitle {background-color: #CCCCCC; margin: -5px 0 0 0; text-align: center; font-style: italic; font-size: 80%; color: #444444; padding: 2px 0; overflow: hidden}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style></head>

<body><div style="display: none;" id="MathJax_Message"></div>
    <a href="#course-page-content" class="hidden">Skip Navigation</a>
    <div class="hidden">
        This page features MathJax technology to render mathematical formulae.
        If you are using a screen reader, please visit <a href="http://www.dessci.com/en/products/mathplayer/">MathPlayer</a> to download the plugin for your browser. Please note that this is an Internet Explorer-only plugin at this time.
    </div>

    <h1 class="hidden">Principles of Reactive Programming</h1>

    <script src="actorbintree_files/204.js" async="" type="text/javascript"></script><script src="actorbintree_files/ga.js" async="" type="text/javascript"></script><script>window.onerror = function(message, url, lineNum) {

  // First check the URL and line number of the error
  url = url || window.location.href;
  // 99% of the time, errors without line numbers arent due to our code,
  // they are due to third party plugins and browser extensions
  if (lineNum === undefined || lineNum == null) return;
  
  // Now figure out the actual error message
  // If it's an event, as triggered in several browsers
  if (message.target && message.type) {
    message = message.type;
  }
  if (!message.indexOf) {
    message = 'Non-string, non-event error: ' + (typeof message);
  }
  
  var errorDescrip = {
    message: message,
    script: url,
    line: lineNum,
    url: document.URL
  }
  
  var err = {
    key: 'page.error.javascript', 
    value: errorDescrip
  }
  
  window._204 = window._204 || [];
  window._204.push(err);
  
  window._gaq = window._gaq || [];
  window._gaq.push(err);
}</script>

<div class="course-topbar container-fluid" role="banner">

    <div class="row-fluid">

        <div class="span3">
          <a href="https://www.coursera.org/" class="course-topbar-logo" data-if-linkable="add-referrer"></a>
        </div>

        <div class="course-topbar-nav-container span9" style="float:right;">
            <h2 class="hidden">Top Navigation Bar</h2>

            <ul class="course-topbar-nav-list">
                <li class="course-topbar-nav-list-item">
                  <a href="https://www.coursera.org/courses" data-if-linkable="add-referrer">Courses</a>
                </li>

                
                <li class="course-topbar-nav-list-item" tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" aria-owns="course-topbar-my" data-popup="#course-topbar-my" data-popup-bind-open="mouseenter" data-popup-close="" style="cursor:pointer;" data-popup-direction="se">
                                        <a data-user-id="4658484">
                        Stefano Sgorlon                        <i class="icon-caret-down"></i>
                    </a>
                </li>

                            </ul>
        </div>
    </div>

    <div id="course-topbar-aboutus" class="course-topbar-sublist">
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/about/jobs" target="_new" data-if-linkable="add-referrer">Jobs</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/about/team" target="_new" data-if-linkable="add-referrer">Team</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/about/contact" target="_new" data-if-linkable="add-referrer">Contact Us</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/about/" target="_new" data-if-linkable="add-referrer">About Us</a>
    </div>

    <div id="course-topbar-my" class="course-topbar-sublist">
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/" target="_new">My Courses</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/account/profile" target="_new">Profile</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/account/records" target="_new">Course Records</a>
        <a class="course-topbar-sublist-item" href="https://www.coursera.org/account/settings" target="_new">Settings</a>
                <a class="course-topbar-sublist-item" href="https://class.coursera.org/reactive-001/class/preferences">Course Preferences</a>
        <a class="course-topbar-sublist-item" href="https://class.coursera.org/reactive-001/auth/logout">Sign Out</a>
    </div>

</div>








<div class="course-topbanner-wrapper">
  <div class="course-topbanner">
    <div class="course-topbanner-university-logo">
      <a href="https://www.coursera.org/epfl" class="coursera-university-color" target="_blank" data-if-linkable="add-referrer" title="https://www.coursera.org/epfl">
        <img src="actorbintree_files/university_logo.png" alt="epfl">
      </a>
    </div>

    
    <h1 class="course-topbanner-header">
      <a class="course-topbanner-name coursera-university-color" href="https://class.coursera.org/reactive-001/class/index" data-if-linkable="modal-lock">
        Principles of Reactive Programming      </a>
      <br>
      <span class="course-topbanner-instructor" style="">
        by Erik Meijer, Martin Odersky, Roland Kuhn      </span>
    </h1>

  </div>
</div>

        <div class="container-fluid" style="position:relative;">
        <div class="row-fluid">
            <div id="course-page-sidebar" role="navigation">
                <div class="course-navbar-container">
	<a href="https://class.coursera.org/reactive-001/class/index" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_index">
		<img src="actorbintree_files/logo.jpeg" style="width: 205px;height: 116px;margin: -15px 0px 8px 1px; box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.05);" alt="Course Home Page">
	</a>

	<div data-coursera-course-search-nav-widget="" class="input-append course-search-nav-box">
		<form class="form-inline minimized-search" method="get" action="https://class.coursera.org/reactive-001/class/search" data-js-search-form="">
			<label for="course-search-nav-input" class="accessible-text-for-reader">Search this course</label>
			<input id="course-search-nav-input" name="q" data-js-search-input="" type="text">&nbsp;
			<button class="btn icon-search" type="submit" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="search">
				<span class="accessible-text-for-reader">Search</span>
			</button>
		</form>
	</div>

<h2 class="hidden">Side Navigation Bar</h2>
<ul class="course-navbar-list">
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/class/index" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Home">
				
				Home							</a>
						</li>
	
		
	<li class="course-navbar-item">
								</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/lecture/index" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Video_Lectures">
				
				Video Lectures							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=LearningResources" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Learning_Resources">
				
				Learning Resources							</a>
						</li>
	
		
	<li class="course-navbar-item active">
								<a href="https://class.coursera.org/reactive-001/assignment/index" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Assignments">
				
				Assignments							<span class="course-navbar-selected-marker">(selected)</span></a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=Assignment_2_FAQ" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Assignment_2_FAQ_(Simulations)">
				
				Assignment 2 FAQ (Simulations)							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=assignment_3_faq" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Assignment_3_FAQ_(NodeScala)">
				
				Assignment 3 FAQ (NodeScala)							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=Week_4_FAQ" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Week_4_FAQ_(Lectures_+_Assignment)">
				
				Week 4 FAQ (Lectures + Assignment)							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=Week_5_FAQ" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Week_5_FAQ_(Actors)">
				
				Week 5 FAQ (Actors)							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=Week_6_FAQ" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Week_6_FAQ_(Supervision)">
				
				Week 6 FAQ (Supervision)							</a>
						</li>
	
		
	<li class="course-navbar-item">
								</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/forum/index" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Discussion_Forums">
				
				Discussion Forums							</a>
						</li>
	
		
	<li class="course-navbar-item">
								</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=ToolsSetup" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Tools_Setup">
				
				Tools Setup							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=SbtTutorial" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Sbt_Tutorial">
				
				Sbt Tutorial							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=EclipseTutorial" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Eclipse_Tutorial">
				
				Eclipse Tutorial							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=ScalaTutorial" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Scala_Tutorial">
				
				Scala Tutorial							</a>
						</li>
	
		
	<li class="course-navbar-item">
								</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=ScalaStyleGuide" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Scala_Style_Guide">
				
				Scala Style Guide							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=CheatSheet" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Scala_Cheat_Sheet">
				
				Scala Cheat Sheet							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=ReactiveCheatSheet" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Reactive_Cheat_Sheet">
				
				Reactive Cheat Sheet							</a>
						</li>
	
		
	<li class="course-navbar-item">
								<a href="https://class.coursera.org/reactive-001/wiki/view?page=GradingPolicy" data-if-linkable="modal-lock,gray,lock-icon" class="coursera-university-color" data-ab-user-convert-for="honorcode_to_welcome2" data-ab-user-convert="navclick_Grading_Policy">
				
				Grading Policy							</a>
						</li>
	
	
		
		<li class="course-navbar-item">
		<a href="http://www.meetup.com/Coursera/" target="_blank" class="coursera-university-color">
			Join a Meetup
			<span class="icon-share"></span>
		</a>
	</li>
	
    </ul>

<ul style="list-style-type:none;margin-left: 10px;">
  <li><a href="http://help.coursera.org/" class="coursera-university-color" target="_blank" title="Open help articles in new window"><i class="icon-question-sign"></i> Help Articles</a></li>
</ul>

<ul style="list-style-type:none;margin-left: 10px;">
		<li><a href="https://class.coursera.org/reactive-001/forum/list?forum_id=10000" class="coursera-university-color"><i class="icon-comments"></i> Course Materials Errors</a></li>
	<li><a href="https://class.coursera.org/reactive-001/forum/list?forum_id=10001" class="coursera-university-color"><i class="icon-comments"></i> Technical Issues</a></li>

</ul>

</div>
            </div>
            <div id="course-page-content" role="main">
                                <h2 class="course-page-header">
  <span>Actor Binary Tree: Instructions</span>

  <a class="coursera-reporter-link" title="Click here if you're experiencing technical problems or found errors in the course materials." target="_blank" href="https://class.coursera.org/reactive-001/help/programming?url=https%3A%2F%2Fclass.coursera.org%2Freactive-001%2Fassignment%2Fview%3Fassignment_id%3D17">
     Help
  </a>
</h2>

<br>
<p>When you're ready to submit your solution, go to the <a href="https://class.coursera.org/reactive-001/assignment/list">assignments list</a>.
</p>

<br>
<p>
</p><p>Attention: You are allowed to submit <b>an unlimited number of times</b>!
 for grade purposes. Once you have submitted your solution, you should 
see your grade and a feedback about your code on the Coursera website 
within 20 minutes. If you want to improve your grade, just submit an 
improved solution. </p>

<p>To get started, <a href="https://spark-public.s3.amazonaws.com/reactive/assignments/actorbintree.zip">download the actorbintree.zip</a> handout archive file and extract it somewhere on your machine.</p>

<h4 id="binary-trees">Binary Trees</h4>
<p>Binary trees are tree based data structures where every node has at 
most two children (left and right). In this exercise, every node stores 
an integer element. From this we can build a binary search tree by 
requiring for every node that</p>
<ul>
<li>values of elements in the left subtree are strictly smaller than the node's element</li>
<li>values of elements in the right subtree are strictly bigger than the node's element</li>
</ul>
<p>In addition, there should be no duplicates, hence we obtain a binary tree set.</p>
<p>Your task in this assignment is to implement an actor-based binary 
tree set where each node is represented by one actor. The advantage of 
such an actor-based solution is that it can execute fully asynchronously
 and in parallel.</p>
<h4 id="the-api">The API</h4>
<p>You can find the message-based API for the actor-based binary tree to be implemented in the supplied <code>BinaryTreeSet</code> object in the file <code>BinaryTreeSet.scala</code>.</p>
<p>The operations, represented by actor messages, that the implementation should support are the following:</p>
<ul>
<li><code>Insert</code></li>
<li><code>Remove</code></li>
<li><code>Contains</code></li>
</ul>
<p>All three of the operations expect an <code>ActorRef</code> representing the requester of the operation, a numerical identifier of the operation and the element itself. <code>Insert</code> and <code>Remove</code> operations should result in an <code>OperationFinished</code> message sent to the provided requester <code>ActorRef</code> reference including the id of the operation. <code>Remove</code> and <code>Insert</code> should return an <code>OperationFinished</code> message even if the element was not in the tree or already present, respectively. <code>Contains</code> should result in a <code>ContainsResult</code>
 message containing the result of the lookup (a Boolean which is true if
 and only if the element is in the tree when the query arrives) and the 
identifier of the <code>Contains</code> query.</p>
<h4 id="handling-of-removal">Handling of Removal</h4>
<p>You should observe that both the <code>Insert</code> and <code>Contains</code>
 operations share an important property, namely, they only traverse a 
linear path from the root of the tree to the appropriate inner node or 
leaf. Since the tree nodes are actors which process messages one-by-one,
 no additional synchronization is needed between these operations. 
Removal in a binary tree unfortunately results in tree restructuring, 
which means that nodes would need to communicate and coordinate between 
each other (while additional operations arrive from the external 
world!).</p>
<p>Therefore, instead of implementing the usual binary tree removal, in 
your solution you should use a flag that is stored in every tree node (<code>removed</code>)
 indicating whether the element in the node has been removed or not. 
This will result in a very simple implementation that is concurrent and 
correct with minimal effort. Unfortunately this decision results in the 
side effect that the tree set accumulates "garbage" (elements that have 
been removed) over time.</p>
<h4 id="garbage-collection">Garbage Collection</h4>
<p>As we have seen, removal of entries can be implemented simply by 
using a removal flag with the added cost of growing garbage over time. 
To overcome this limitation you will need to implement a "garbage 
collection" feature. Whenever your binary tree set receives a <code>GC</code> message, it should clean up all the removed elements, while additional operations might arrive from the external world.</p>
<p>The garbage collection task can be implemented in two steps. The first subtask is to implement an internal <code>CopyTo</code>
 operation on the binary tree that copies all its non-removed contents 
from the binary tree to a provided new one. This implementation can 
assume that no operations arrive while the copying happens (i.e. the 
tree is protected from modifications while copying takes places).</p>
<p>The second part of the implementation is to implement garbage collection in the manager (<code>BinaryTreeSet</code>)
 by using the copy operation. The newly constructed tree should replace 
the old one and all actors from the old one should be stopped. Since 
copying assumes no other concurrent operations, the manager should 
handle the case when operations arrive while still performing the copy 
in the background. It is your responsibility to implement the manager in
 such a way that the fact that garbage collection happens is invisible 
from the outside (of course additional delay is allowed). For the sake 
of simplicity, your implementation should ignore GC requests that arrive
 while garbage collection is taking place.</p>
<h4 id="ordering-guarantees">Ordering Guarantees</h4>
<p>Replies to operations may be sent in any order but the contents of <code>ContainsResult</code> replies must obey the order of the operations. To illustrate what this means observe the following example:</p>
<p>Client sends:</p>
<pre><code>Insert(testActor, id=100, elem=1)
Contains(testActor, id=50, elem=2)
Remove(testActor, id=10, elem=1)
Insert(testActor, id=20, elem=2)
Contains(testActor, id=80, elem=1)
Contains(testActor, id=70, elem=2)</code></pre>
<p>Client receives:</p>
<pre><code>ContainsResult(id=70, true)
OperationFinished(id=20)
OperationFinished(id=100)
ContainsResult(id=80, false)
OperationFinished(id=10)
ContainsResult(id=50, false)</code></pre>
<p>While the results seem "garbled", they actually strictly correspond 
to the order of the original operations. On closer examination you can 
observe that the order of original operations was [100, 50, 10, 20, 80, 
70]. Now if you order the responses according to this sequence the 
result would be:</p>
<pre><code>Insert(testActor, id=100, elem=1) -&gt; OperationFinished(id=100)
Contains(testActor, id=50, elem=2) -&gt; ContainsResult(id=50, false)
Remove(testActor, id=10, elem=1) -&gt; OperationFinished(id=10)
Insert(testActor, id=20, elem=2) -&gt; OperationFinished(id=20)
Contains(testActor, id=80, elem=1) -&gt; ContainsResult(id=80, false)
Contains(testActor, id=70, elem=2) -&gt; ContainsResult(id=70, true)</code></pre>
<p>As you can see, the responses the client received are the same, hence
 they must have been executed sequentially, and only the responses have 
arrived out of order. Thus, the responses obey the semantics of 
sequential operations -- it is simply their arrival order is not 
defined. You might find it easier for testing to use sequential 
identifiers for the operations, since that makes it easier to follow the
 sequence of responses.</p>
<p>You might also note that out-of-order responses can only happen if 
the client does not wait for each individual answer before continuing 
with sending operations.</p>
<p>While this loose ordering guarantee on responses might look strange 
at first, it will significantly simplify the implementation of the 
binary tree and you are encouraged to make full use of it.</p>
<h4 id="your-task">Your task</h4>
<p>You can find code stubs in the file <code>BinaryTreeSet.scala</code> which provides you with the API as described above, the <code>BinaryTreeSet</code> and <code>BinaryTreeNode</code> classes. The <code>BinaryTreeSet</code>
 represents the whole binary tree. This is also the only actor that is 
explicitly created by the user and the only actor the user sends 
messages to.</p>
<p>You can implement as many or as few message handlers as you like and 
you can add additional variables or helper functions. We provide 
suggestions in your code stub, marked with the comment <code>optional</code>, but you are free to use it fully or partially; the optional elements are not part of the tested API.</p>
<p>To see a binary tree in operation check our provided tests in <code>BinaryTreeSuite.scala</code>. Note in particular that it is the user who triggers garbage collection by sending a <code>GC</code> message (for the sake of simplicity of this exercise).</p>
<p>Don't forget to make sure that no <code>Operation</code> messages 
interfere during garbage collection and that the user does not receive 
any messages that may result from the copying process.</p>
<p>The following may be useful for your implementation:</p>
<ul>
<li>Another way to stop an actor, besides the <code>stop</code> method you have seen, is to send it a <code>PoisonPill</code> message.</li>
<li><code>context.parent</code> returns the ActorRef of the actor which created the current actor (i.e. its parent).</li>
<li><p>If you see a log message like the following</p>
<p>[INFO] [11/21/2013 14:04:13.237] 
[PostponeSpec-akka.actor.default-dispatcher-2] 
[akka://PostponeSpec/deadLetters] Message 
[actorbintree.BinaryTreeSet$OperationFinished] from 
Actor[akka://PostponeSpec/user/$e/my-actor#-1012560631] to 
Actor[akka://PostponeSpec/deadLetters] was not delivered. [1] dead 
letters encountered.</p></li>
</ul>
<p>it means that one of your messages (here the OperationFinished) message was not delivered from actor <code>my-actor</code> to actor <code>deadLetters</code>â€”the
 latter is where actors forward their messages after they terminate. You
 should check that you do not stop actors prematurely.</p><p></p>

            </div>
        </div>
    </div>
        
    
    <script src="actorbintree_files/spark.js"></script>

<script>window.onerror = function(message, url, lineNum) {

  // First check the URL and line number of the error
  url = url || window.location.href;
  // 99% of the time, errors without line numbers arent due to our code,
  // they are due to third party plugins and browser extensions
  if (lineNum === undefined || lineNum == null) return;
  
  // Now figure out the actual error message
  // If it's an event, as triggered in several browsers
  if (message.target && message.type) {
    message = message.type;
  }
  if (!message.indexOf) {
    message = 'Non-string, non-event error: ' + (typeof message);
  }
  
  var errorDescrip = {
    message: message,
    script: url,
    line: lineNum,
    url: document.URL
  }
  
  var err = {
    key: 'page.error.javascript', 
    value: errorDescrip
  }
  
  window._204 = window._204 || [];
  window._204.push(err);
  
  window._gaq = window._gaq || [];
  window._gaq.push(err);
}</script>
<script type="text/javascript">
    // SET UP THE MULTITRACKER
        window.logger = window.Log({level:"error"});
        var parts = location.host.split(".");
    while(parts.length > 2) { parts.shift(); }

    window.multitracker = window.MultiTracker({logger:window.logger});
    window.multitracker.register('204', window._204 = window._204 || []);
    window.multitracker.register('ga', window._gaq = window._gaq || [], 'google');

    // SET UP GA and 204
    window._gaq.push(['_setAccount', 'UA-28377374-1']);
    window._gaq.push(['_setDomainName', 'coursera.org']);
    window._gaq.push(['_setAllowLinker', true]);  
    window._gaq.push(['_trackPageview']);
    
    // configure 204 with the following settings
    window._204.push(["client", "spark"]);
    window._204.push(["user", 4658484]);
    window._204.push(["domain", "." + parts.join(".")]);

    // set off the first event
    window._204.push({key:"pageview", val:{}});

    // override our multitracker queues with the ga queue when it is ready
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    
      ga.onload = ga.onreadystatechange = function() {
          ga.onreadystatechange = ga.onload = null;
          window.multitracker.get('ga').queue = window._gaq;
      };
    })();

    // override our multitracker queues with the 204 queue when it is ready
    (function() {
      var a = document.createElement('script'); a.type = 'text/javascript'; a.async = true;
      a.src = 'https://eventing.coursera.org/204.min.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(a, s);
      a.onload = a.onreadystatechange = function() {
          a.onreadystatechange = a.onload = null;
          window.multitracker.get('204').queue = window._204;
      };
    })();
</script>

<script>
  // Set up shared AB testing object
  (function() {
    window.ab = {};

    // we want to share the 204 session cookie with the AB session cookie...
    var sessionId = AB.makeSession("__204u", {expires:365, domain:"." + location.host});

    window.ab.user = window.AB(4658484, "user", {debug:true, tracker:window.multitracker, logger:window.logger});
    window.ab.session = window.AB(sessionId, "session", {debug:true, tracker:window.multitracker, logger:window.logger});

    if(window.CourseraABExperiments.user) {
        window.ab.user.addExperiments(window.CourseraABExperiments.user);
        window.ab.user.runExperimentsOn("body");
    }

    if(window.CourseraABExperiments.session) {
        window.ab.session.addExperiments(window.CourseraABExperiments.session);
        window.ab.session.runExperimentsOn("body");
    }
  })();
</script>


    <script>
      // Set up help widget
      (function() {
        $("[data-helpwidget]").each(function() {
            window.HelpWidget(this, {tracker: window.multitracker});
        });
       })();

        $("[data-readme]").each(function() {
            window.ReadMe(this);
        });
    </script>

    <script src="actorbintree_files/modal_focus.js" type="text/javascript"></script>
    <script src="actorbintree_files/get_query_parameters.js" type="text/javascript"></script>
    <script src="actorbintree_files/signature_track.js" type="text/javascript"></script>
    <script src="actorbintree_files/signatureTrackLastChanceModal.js" type="text/javascript"></script>
    <script src="actorbintree_files/signatureTrackLastChanceModal2.js" type="text/javascript"></script>
    <script src="actorbintree_files/item_list.js" type="text/javascript"></script>
    <script src="actorbintree_files/navbar.js" type="text/javascript"></script>

    
    <script>
     // Set up help widget
      (function() {
        $("[data-helpwidget]").each(function() {
            window.HelpWidget(this, {tracker: window.multitracker});
        });
       })();
    </script>

        <script>
    (function() {
        $("<style type='text/css'> .coursera-reporter-link { display:inline-block;} </style>").appendTo("head");
    })();
    </script>
    
    <script type="text/x-mathjax-config;executed=true">
MathJax.Hub.Config({
  config: ["MMLorHTML.js"],
  
  styleSheets: [],
  styles: {},

  jax: ["input/TeX"],
  
  extensions: ["tex2jax.js"],

  preJax: null,
  postJax: null,

  preRemoveClass: "MathJax_Preview",

  showProcessingMessages: true,

  messageStyle: "none",
  
  displayAlign: "center",
  displayIndent: "0em",
  
  delayStartupUntil: "none",

  skipStartupTypeset: false,
  
  elements: [],
  
  tex2jax: {
	    inlineMath: [
	                 ['$$','$$'],      // uncomment this for standard TeX math delimiters
	                 ['\\(','\\)']
	                 ],

	                 displayMath: [
	                 ['\\[','\\]']
	                 ],

    skipTags: ["script","noscript","style","textarea","pre","code"],
    ignoreClass: "tex2jax_ignore",
    processClass: "tex2jax_process",
    processEscapes: false,
    processEnvironments: true,
    preview: "TeX"
    
  },
  
  mml2jax: {
    preview: "alttext"
    
  },
  
  jsMath2jax: {
    preview: "TeX"
    
  },

  TeX: {
    TagSide: "right",
    TagIndent: ".8em",
    MultLineWidth: "85%",
    Macros: {},

    extensions: ["AMSmath.js", "AMSsymbols.js"]
    
  },

  //============================================================================
  //
  //  These parameters control the MathML inupt jax.
  //
  MathML: {
    //
    //  This specifies whether to use TeX spacing or MathML spacing when the
    //  HTML-CSS output jax is used.
    //
    useMathMLspacing: false
  },
  
  //============================================================================
  //
  //  These parameters control the HTML-CSS output jax.
  //
  "HTML-CSS": {
    
    scale: 100,
    
    availableFonts: ["STIX","TeX"],
    
    preferredFont: "TeX",
    
    webFont: "TeX",
    
    imageFont: "TeX",
    
    undefinedFamily: "STIXGeneral,'Arial Unicode MS',serif",
      
    showMathMenu: true,

    styles: {},
    
    tooltip: {
      delayPost: 600,          // milliseconds delay before tooltip is posted after mouseover
      delayClear: 600,         // milliseconds delay before tooltip is cleared after mouseout
      offsetX: 10, offsetY: 5  // pixels to offset tooltip from mouse position
    }
  },
  
  //============================================================================
  //
  //  These parameters control the NativeMML output jax.
  //
  NativeMML: {

    scale: 100,

    showMathMenu: true,
    showMathMenuMSIE: true,

    styles: {}
  },
  
  MathMenu: {
    delay: 400,
    
    helpURL: "http://www.mathjax.org/help/user/",

    showRenderer: true,
    showFontMenu: false,
    showContext:  false,

    windowSettings: {
      status: "no", toolbar: "no", locationbar: "no", menubar: "no",
      directories: "no", personalbar: "no", resizable: "yes", scrollbars: "yes",
      width: 100, height: 50
    },
    
    styles: {}
    
  },

  MMLorHTML: {
    prefer: {
      MSIE:    "MML",
      Firefox: "MML",
      Opera:   "HTML",
      other:   "HTML"
    }
  }
});
</script>
<script type="text/javascript">
(function () {

  function loadMathJax() {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://duqnjvq4jwr55.cloudfront.net/2.1/MathJax.js";
    document.getElementsByTagName("head")[0].appendChild(script);
  }

  window.loadOrRefreshMathJax = function(domId) {
    if (window.MathJax) {
      if (domId) {
        MathJax.Hub.Queue(["Typeset", MathJax.Hub, domId]);
      } else {
        MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
      }
    } else {
      loadMathJax();
    }
  }
})();
</script>
    <script type="text/javascript">
        var site_base_url = "https:\/\/www.coursera.org\/";
        var site_static_asset_url = "https:\/\/dt5zaw6a98blc.cloudfront.net\/site-static\/";
        var spark_class_short_name = "reactive";
        var spark_class_id = 971465;
        var spark_class_url = "\/reactive-001";
        var spark_signature_url = "https:\/\/class.coursera.org\/reactive-001\/signature\/";

        var course_strings_name = "Principles of Reactive Programming";
        var student_full_name = "Stefano Sgorlon";
    </script>

    
<script type="text/javascript">$(function() { loadOrRefreshMathJax();})</script>




</body></html>